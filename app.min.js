var conversions=[],selectedType,selectedOption,database,currentConversionTable,tbl;$(document).ready(function(){var e=($("#selectType"),$("#selectUnit"));e.prop("disabled",!0).select2({placeholder:"Select a unit"}),$("#selectType").on("change",function(){selectedType=$(this).val(),e.removeAttr("disabled"),currentConversionTable=$.grep(database,function(e){return e.type==selectedType})[0].conversions,e.html("<option></option>"),$("#inputNumberContainer").attr("disabled",!0).val(""),$("#results").html(""),$(currentConversionTable).each(function(e,t){$("#selectUnit").append($("<option></option>").val(t.from).html(t.from)).select2({placeholder:"Select a unit"})})}),$("#selectUnit").on("change",function(){var e=$(this).val().toLowerCase();tbl=$.grep(currentConversionTable,function(t){return t.from.toLowerCase()==e})[0].to,$("#inputNumberContainer").prop("disabled",!1),$("#results").html(""),$.each(tbl,function(e,t){$("#results").append($('<li class="list-group-item"></li>').append($('<span class="badge"></span>').html(t.unit)).append($("<span> - </span>").attr("id",t.unit))),$("#results").hide()}),$("#inputNumberContainer").trigger("keyup")}),$("#inputNumberContainer").on("keyup",function(){var e=$(this).val();console.log(e),console.log(tbl),isNaN(parseFloat(e))?$("#results").slideUp(250):($.each(tbl,function(t,n){var a=parseFloat(e)*parseFloat(this.multiplier).toPrecision(5);isNaN(a)||$("#"+this.unit).html(a)}),$("#results").slideDown(500))}),$.ajax({type:"GET",url:"data.json",dataType:"json",success:function(e){database=e,$(database).each(function(e,t){$("#selectType").append($("<option></option>").val(t.type).html(t.type)).select2({placeholder:"Select a type"})})}})});